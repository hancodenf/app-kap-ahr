import{a as b,u as N,r as k,j as e,L as _}from"./app-F8qhh5W5.js";import{T as d,I as l}from"./InputError-Dau_7ZkG.js";import{I as i}from"./InputLabel-DOqkLryw.js";import{P as w}from"./PrimaryButton-CgBM41H5.js";import{K as P}from"./transition-B_X9XNEU.js";function L({mustVerifyEmail:p,status:x,className:h=""}){const a=b().props.auth.user,{data:o,setData:r,post:f,errors:t,processing:c,recentlySuccessful:g}=N({name:a.name,email:a.email,position:a.position||"",user_type:a.user_type||"",profile_photo:null,_method:"PATCH"}),[u,j]=k.useState(a.profile_photo?`/storage/${a.profile_photo}`:null),v=s=>{const n=s.target.files?.[0];if(n){r("profile_photo",n);const m=new FileReader;m.onloadend=()=>{j(m.result)},m.readAsDataURL(n)}},y=s=>{s.preventDefault(),f(route("profile.update"))};return e.jsxs("section",{className:h,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Informasi Profil"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Perbarui informasi profil dan alamat email akun Anda."})]}),e.jsxs("form",{onSubmit:y,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto Profil"}),e.jsxs("div",{className:"flex items-center gap-4",children:[u?e.jsx("img",{src:u,alt:"Preview",className:"w-20 h-20 rounded-full object-cover border-2 border-gray-300"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 text-2xl border-2 border-gray-300",children:e.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{id:"profile_photo",type:"file",accept:"image/*",onChange:v,className:"hidden"}),e.jsx("label",{htmlFor:"profile_photo",className:"cursor-pointer inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:"Ubah Foto"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"JPG, PNG, atau GIF (MAX. 2MB)"})]})]}),t.profile_photo&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.profile_photo})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",value:"Nama Lengkap"}),e.jsx(d,{id:"name",className:"mt-1 block w-full",value:o.name,onChange:s=>r("name",s.target.value),required:!0,isFocused:!0,autoComplete:"name",placeholder:"Masukkan nama lengkap"}),e.jsx(l,{className:"mt-2",message:t.name})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",value:"Email"}),e.jsx(d,{id:"email",type:"email",className:"mt-1 block w-full",value:o.email,onChange:s=>r("email",s.target.value),required:!0,autoComplete:"username",placeholder:"Masukkan email"}),e.jsx(l,{className:"mt-2",message:t.email})]}),a.role?.name==="company"&&e.jsxs("div",{children:[e.jsx(i,{htmlFor:"position",value:"Posisi"}),e.jsx(d,{id:"position",className:"mt-1 block w-full",value:o.position,onChange:s=>r("position",s.target.value),placeholder:"Masukkan posisi"}),e.jsx(l,{className:"mt-2",message:t.position})]}),a.role?.name==="company"&&e.jsxs("div",{children:[e.jsx(i,{htmlFor:"user_type",value:"Tipe User"}),e.jsxs("select",{id:"user_type",value:o.user_type,onChange:s=>r("user_type",s.target.value),className:"mt-1 w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Pilih Tipe User"}),e.jsx("option",{value:"Tenaga Ahli",children:"Tenaga Ahli"}),e.jsx("option",{value:"Staff",children:"Staff"})]}),e.jsx(l,{className:"mt-2",message:t.user_type})]}),a.role?.name==="client"&&a.client_name&&e.jsxs("div",{children:[e.jsx(i,{htmlFor:"client_name",value:"Client"}),e.jsx("div",{className:"mt-1 w-full border border-gray-200 bg-gray-50 rounded-md px-3 py-2 text-gray-700",children:a.client_name}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Informasi client tidak dapat diubah"})]}),p&&a.email_verified_at===null&&e.jsxs("div",{children:[e.jsxs("p",{className:"mt-2 text-sm text-gray-800",children:["Alamat email Anda belum terverifikasi.",e.jsx(_,{href:route("verification.send"),method:"post",as:"button",className:"rounded-md text-sm text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ml-1",children:"Klik di sini untuk mengirim ulang email verifikasi."})]}),x==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"Link verifikasi baru telah dikirim ke alamat email Anda."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{disabled:c,children:c?"Menyimpan...":"Simpan"}),e.jsx(P,{show:g,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Tersimpan."})})]})]})]})}export{L as default};
