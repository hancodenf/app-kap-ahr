import{r as v,j as e,H as f,L as g}from"./app-P5z6obs2.js";import{A as y}from"./AuthenticatedLayout-D0YHYUQl.js";import"./ApplicationLogo-DVGoP-gl.js";function _({project:a,workingSteps:l}){const[r,u]=v.useState(0),n=l.flatMap(s=>s.tasks),d=n.length,m=n.filter(s=>s.completion_status==="completed").length,p=n.filter(s=>s.completion_status==="in_progress").length,j=n.filter(s=>s.completion_status==="pending").length,c=d>0?Math.round(m/d*100):0;return e.jsxs(y,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(g,{href:route("klien.projects.index"),className:"text-sm text-primary-600 hover:text-primary-700 mb-1 inline-flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Kembali ke Projects"]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-1",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[a.client_name," â€¢ Role: Client"]})]}),e.jsx("span",{className:`px-4 py-2 rounded-lg text-sm font-semibold shadow-sm ${a.status==="open"?"bg-green-100 text-green-800 border border-green-200":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:a.status.toUpperCase()})]}),children:[e.jsx(f,{title:a.name}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-100 text-sm font-medium",children:"Overall Progress"}),e.jsxs("p",{className:"text-3xl font-bold mt-1",children:[c,"%"]})]}),e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-500",style:{width:`${c}%`}})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border-2 border-green-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:m}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["dari ",d," tasks"]})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border-2 border-yellow-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-1",children:p}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"sedang dikerjakan"})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border-2 border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold text-gray-600 mt-1",children:j}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"belum dimulai"})]}),e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})})]})})]}),l.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:[e.jsxs("div",{className:"border-b border-gray-200 px-6 py-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Workflow Steps"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Klik tab untuk melihat tasks di setiap step"})]}),e.jsx("div",{className:"flex overflow-x-auto",children:l.map((s,t)=>{const x=s.tasks,h=x.filter(b=>b.completion_status==="completed").length,o=x.length,i=o>0?Math.round(h/o*100):0;return e.jsxs("button",{onClick:()=>u(t),className:`flex-1 min-w-[200px] px-6 py-4 border-b-4 transition-all ${r===t?"border-primary-600 bg-primary-50":"border-transparent hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${r===t?"bg-primary-600 text-white":"bg-gray-200 text-gray-600"}`,children:t+1}),e.jsxs("span",{className:"text-xs text-gray-600 font-medium",children:[i,"%"]})]}),e.jsx("p",{className:`text-sm font-semibold text-left ${r===t?"text-primary-900":"text-gray-700"}`,children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500 text-left mt-1",children:[h,"/",o," tasks"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-2",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all ${i===100?"bg-green-500":i>0?"bg-yellow-500":"bg-gray-300"}`,style:{width:`${i}%`}})})]},s.id)})})]}),l[r]&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:l[r].name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Step ",r+1," dari ",l.length]})]}),l[r].tasks.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Belum Ada Task"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Belum ada task dalam step ini"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:l[r].tasks.map(s=>{const t=s.completion_status==="pending";return e.jsxs("div",{className:`group relative border-2 rounded-xl p-5 transition-all duration-200 ${t?"border-gray-200 bg-gray-50 opacity-60":s.completion_status==="completed"?"border-green-200 bg-green-50 hover:shadow-lg hover:border-green-300":s.completion_status==="in_progress"?"border-yellow-200 bg-yellow-50 hover:shadow-lg hover:border-yellow-300":"border-gray-200 bg-white hover:shadow-lg hover:border-primary-300"}`,children:[e.jsxs("div",{className:"absolute top-0 right-0 mt-4 mr-4",children:[s.completion_status==="completed"&&e.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.completion_status==="in_progress"&&e.jsx("div",{className:"w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center animate-pulse",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})}),s.completion_status==="pending"&&e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"pr-14",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:s.name}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[t&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Belum Tersedia"]}),s.is_required&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 border border-red-200",children:"Required"}),s.client_interact&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:"Perlu Input"})]}),s.latest_assignment?.notes&&e.jsxs("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:["ðŸ“ ",s.latest_assignment.notes]}),s.assignments&&s.assignments.length>0&&s.assignments[0].user&&e.jsxs("div",{className:"mb-3 p-2 bg-white border border-gray-200 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tim yang mengerjakan:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xs font-medium text-primary-700",children:s.assignments[0].user.name.charAt(0)})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:s.assignments[0].user.name}),s.assignments[0].user.role&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.assignments[0].user.role.name})]})]})]}),e.jsx("div",{className:"mt-4",children:t?e.jsxs("button",{type:"button",disabled:!0,className:"w-full px-4 py-2.5 bg-gray-300 text-gray-500 text-sm font-medium rounded-lg cursor-not-allowed",children:[e.jsx("svg",{className:"w-4 h-4 inline mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Belum Tersedia"]}):e.jsx(g,{href:route("klien.tasks.show",s.id),className:"block w-full text-center px-4 py-2.5 bg-primary-600 hover:bg-primary-700 text-white text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md",children:"Lihat Detail & Kelola â†’"})})]})]},s.id)})})]})]}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"Belum Ada Working Steps"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Project ini belum memiliki working steps yang tersedia"})]})})]})})]})}export{_ as default};
