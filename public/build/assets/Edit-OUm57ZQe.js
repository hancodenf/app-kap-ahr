import{r as i,u as T,j as e,H as Nt,L as kt,b as j,c as ke}from"./app-shFbpeXv.js";import{A as wt}from"./AuthenticatedLayout-ps-qv15M.js";import{C as re}from"./ConfirmDialog-0juBM27S.js";import{S as we}from"./SearchableSelect-DI9Etiv5.js";import{u as St,a as Se,D as Ct,c as _t,S as Ce,v as _e,b as Tt,s as Mt,K as Dt,P as Et,d as Te,e as Me,C as De}from"./sortable.esm-B3ilDZYz.js";import"./ApplicationLogo-BlZ2B64n.js";import"./transition-4Npdb_ie.js";import"./dialog-CS2Sxto9.js";import"./index-Cajdl9GM.js";function Lt({step:d,children:c,isCollapsed:w,onToggleCollapse:N}){const{attributes:z,listeners:A,setNodeRef:m,transform:_,transition:M,isDragging:D}=Me({id:`step-${d.id}`}),u={transform:De.Transform.toString(_),transition:M,opacity:D?.5:1};return e.jsx("div",{ref:m,style:u,className:"bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{...z,...A,className:"cursor-grab active:cursor-grabbing mr-3 p-1 hover:bg-gray-100 rounded",style:{touchAction:"none"},children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"})})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-primary-700 mb-2 flex items-center",children:["ðŸ”¹ ",d.name,e.jsx("button",{onClick:N,className:"ml-3 p-1 hover:bg-gray-200 rounded transition-colors",title:w?"Expand substeps":"Collapse substeps",children:e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${w?"rotate-0":"rotate-90"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]}),e.jsx("div",{className:"h-1 w-20 bg-primary-600 rounded"})]})]}),e.jsx("div",{className:"ml-8 md:ml-0",children:c})]})})})}function zt({task:d,onEdit:c,onDelete:w}){const{attributes:N,listeners:z,setNodeRef:A,transform:m,transition:_,isDragging:M}=Me({id:`substep-${d.id}`}),D={transform:De.Transform.toString(m),transition:_,opacity:M?.5:1};return e.jsx("div",{ref:A,style:D,className:"w-full bg-gray-50 border-b border-gray-200 last:border-b-0",children:e.jsxs("div",{className:"px-6 py-4 flex items-center hover:bg-gray-100 transition-colors",children:[e.jsx("div",{...N,...z,className:"cursor-grab active:cursor-grabbing p-2 hover:bg-gray-200 rounded mr-4 flex-shrink-0",style:{touchAction:"none"},onClick:u=>u.stopPropagation(),children:e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-base truncate",children:d.name}),(!!d.is_required||d.client_interact!=="read only"||!!d.multiple_files||d.task_workers&&d.task_workers.length>0)&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[!!d.is_required&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 border border-red-200",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Required"]}),d.client_interact!=="read only"&&e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:d.client_interact==="comment"?"ðŸ’¬ Client Comment":"ðŸ“¤ Client Upload"}),!!d.multiple_files&&e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Multiple Files"}),d.task_workers&&d.task_workers.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:d.task_workers.map((u,R)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",title:`${u.worker_email} - ${u.worker_role}`,children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),u.worker_name]},R))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4 flex-shrink-0",children:[e.jsxs("button",{onClick:u=>{u.stopPropagation(),c(d)},className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:u=>{u.stopPropagation(),w(d.id)},className:"inline-flex items-center justify-center bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})})}function Ut({auth:d,bundle:c,workingSteps:w,teamMembers:N,availableUsers:z,clients:A}){const[m,_]=i.useState(w||[]),[M,D]=i.useState(null),[u,R]=i.useState(null),[Ee,P]=i.useState(!1),[Le,H]=i.useState(!1),[ze,G]=i.useState(!1),[Ae,W]=i.useState(!1),[Ie,Y]=i.useState(!1),[Re,B]=i.useState(!1),[Pe,q]=i.useState(!1),[At,ne]=i.useState(null),[J,Q]=i.useState(null),[X,ie]=i.useState(null),[F,le]=i.useState(null),[Z,oe]=i.useState(!1),[E,de]=i.useState(new Set),[$,ee]=i.useState(null),[He,ce]=i.useState(!1),[We,me]=i.useState(!1),[Be,xe]=i.useState(!1),[k,te]=i.useState(null),qe=St(Se(Et,{activationConstraint:{distance:8}}),Se(Dt,{coordinateGetter:Mt}));i.useEffect(()=>{let t;const a=n=>{const x=window.innerHeight,v=n,L=x-n;v<100?window.scrollBy(0,-10):L<100&&window.scrollBy(0,10)},r=n=>{if(!Z)return;t&&clearInterval(t);const b=100,g=n.clientY,x=window.innerHeight-n.clientY;(g<b||x<b)&&(t=setInterval(()=>{a(n.clientY)},16))},l=()=>{t&&clearInterval(t)};return Z&&(document.addEventListener("pointermove",r),document.addEventListener("pointerup",l)),()=>{t&&clearInterval(t),document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",l)}},[Z]),i.useEffect(()=>{_(w||[])},[w]);const{data:Fe,setData:U,post:$e,reset:se}=T({name:"",bundle_id:c.id}),{data:pe,setData:O,post:Ue,reset:Oe}=T({name:"",working_step_id:0,is_required:!1}),{data:Ke,setData:ue,put:Ve,processing:he,errors:ge,reset:fe}=T({name:""}),{data:S,setData:K,put:Ge,processing:je,errors:V,reset:be}=T({name:"",client_id:0,status:"closed"}),{data:h,setData:C,put:Ye,reset:Je}=T({name:"",client_interact:"read only",multiple_files:!1,is_required:!1,worker_ids:[],approval_roles:[]}),{data:ve,setData:ae,post:Qe,reset:Xe}=T({project_id:c.id,user_id:0,role:"member"}),{data:Ze,setData:ye,put:et,reset:tt}=T({role:"member"}),st=t=>{t.preventDefault(),$e(route("admin.projects.working-steps.store"),{onSuccess:()=>{P(!1),se(),U("name",""),j.reload()}})},at=t=>{t.preventDefault(),Ue(route("admin.projects.tasks.store"),{onSuccess:a=>{H(!1),Oe(),ne(null),O({name:"",working_step_id:0}),j.reload()},onError:a=>{console.error("Error adding task:",a)}})},rt=t=>{te({id:t.id,name:t.name}),ce(!0)},nt=()=>{k&&j.delete(route("admin.projects.working-steps.destroy",k.id))},it=t=>{te({id:t.id,name:t.name}),me(!0)},lt=()=>{k&&j.delete(route("admin.projects.tasks.destroy",k.id))},ot=t=>{ie(t);const a=(t.task_workers?.map(l=>l.project_team_id)||[]).filter(l=>N.some(n=>n.id===l)),r=(t.task_approvals||[]).sort((l,n)=>l.order-n.order).map(l=>l.role);C({name:t.name,client_interact:t.client_interact,multiple_files:t.multiple_files,is_required:t.is_required||!1,worker_ids:a,approval_roles:r}),W(!0)},dt=t=>{Q({id:t.id,name:t.name}),ue({name:t.name}),G(!0)},ct=t=>{t.preventDefault(),J&&Ve(route("admin.projects.working-steps.update",J.id),{onSuccess:()=>{G(!1),Q(null),fe(),j.reload()}})},mt=()=>{K({name:c.name,client_id:c.client_id||0,status:c.status||"closed"}),Y(!0)},xt=t=>{t.preventDefault(),Ge(route("admin.projects.bundles.update",c.id),{onSuccess:()=>{Y(!1),be(),j.reload()}})},pt=t=>{t.preventDefault(),X&&Ye(route("admin.projects.tasks.update",X.id),{onSuccess:()=>{W(!1),ie(null),Je(),j.reload()}})},ut=t=>{t.preventDefault(),Qe(route("admin.projects.team-members.store"),{onSuccess:()=>{B(!1),Xe(),ae({project_id:c.id,user_id:0,role:"member"}),j.reload()}})},ht=t=>{le(t),ye({role:t.role}),q(!0)},gt=t=>{t.preventDefault(),F&&et(route("admin.projects.team-members.update",F.id),{onSuccess:()=>{q(!1),le(null),tt(),j.reload()}})},ft=t=>{te({id:t.id,name:t.user_name}),xe(!0)},jt=()=>{k&&j.delete(route("admin.projects.team-members.destroy",k.id))},Ne=t=>{de(a=>{const r=new Set(a);return r.has(t)?r.delete(t):r.add(t),r})};i.useEffect(()=>{if($&&E.has($)){const t=setTimeout(()=>{de(a=>{const r=new Set(a);return r.delete($),r})},800);return()=>clearTimeout(t)}},[$,E]);const bt=t=>{const{active:a}=t;if(oe(!0),String(a.id).startsWith("substep-")){const r=Number(String(a.id).replace("substep-",""));for(const l of m){const n=l.tasks?.find(b=>b.id===r);if(n){R(n);return}}}if(String(a.id).startsWith("step-")){const r=Number(String(a.id).replace("step-","")),l=m.find(n=>n.id===r);if(l){D(l);return}}},vt=t=>{const{active:a,over:r}=t;if(D(null),R(null),oe(!1),ee(null),!!r){if(String(a.id).startsWith("step-")){const l=Number(String(a.id).replace("step-","")),n=Number(String(r.id).replace("step-","")),b=m.findIndex(x=>x.id===l),g=m.findIndex(x=>x.id===n);if(b!==g){const v=Te(m,b,g).map((s,o)=>({...s,order:o+1}));_(v);const L=v.map(s=>({id:s.id,order:s.order}));ke.post(route("admin.projects.working-steps.reorder"),{steps:L}).then(s=>{}).catch(s=>{console.error("Error reordering steps:",s),alert("Failed to save step order. Please try again."),j.reload()})}return}if(String(a.id).startsWith("substep-")){const l=Number(String(a.id).replace("substep-",""));let n=0,b=null;for(const s of m){const o=s.tasks?.find(f=>f.id===l);if(o){b=o,n=s.id;break}}if(!b)return;let g=n,x=null;if(String(r.id).startsWith("step-"))g=Number(String(r.id).replace("step-",""));else if(String(r.id).startsWith("substep-")){x=Number(String(r.id).replace("substep-",""));for(const s of m)if(s.tasks?.some(o=>o.id===x)){g=s.id;break}}const v=[...m];if(n===g&&x){const s=v.find(o=>o.id===n);if(s?.tasks){const o=s.tasks.findIndex(p=>p.id===l),f=s.tasks.findIndex(p=>p.id===x);o!==f&&o>-1&&f>-1&&(s.tasks=Te(s.tasks,o,f),s.tasks=s.tasks.map((p,y)=>({...p,order:y+1})))}}else if(n!==g){const s=v.find(o=>o.id===n);if(s?.tasks){const o=s.tasks.findIndex(f=>f.id===l);if(o>-1){const[f]=s.tasks.splice(o,1),p=v.find(y=>y.id===g);if(p){if(p.tasks||(p.tasks=[]),f.working_step_id=g,x){const y=p.tasks.findIndex(I=>I.id===x);y>-1?p.tasks.splice(y,0,f):p.tasks.push(f)}else p.tasks.push(f);p.tasks=p.tasks.map((y,I)=>({...y,order:I+1})),s.tasks=s.tasks.map((y,I)=>({...y,order:I+1}))}}}}_(v);const L=[];v.forEach(s=>{s.tasks&&s.tasks.forEach(o=>{L.push({id:o.id,order:o.order,working_step_id:o.working_step_id})})}),ke.post(route("admin.projects.tasks.reorder"),{tasks:L}).then(s=>{}).catch(s=>{console.error("Error reordering tasks:",s),alert("Failed to save task order. Please try again."),j.reload()})}}},yt=t=>{const{active:a,over:r}=t;if(String(a.id).startsWith("substep-")&&r&&String(r.id).startsWith("step-")){const l=Number(String(r.id).replace("step-",""));ee(l)}else ee(null)};return e.jsxs(wt,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:[c.name," - Project Steps"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[m?.length||0," working steps"]})]}),e.jsx(kt,{href:route("admin.projects.bundles.index"),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Back to Projects"})]}),children:[e.jsx(Nt,{title:`${c.name} - Project Steps`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Project Name"}),e.jsx("div",{className:"flex items-center",children:c.status==="open"?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Project Active"]}):e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700 border border-gray-300",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Project Closed"]})})]}),e.jsx("p",{className:"text-xl font-semibold text-gray-800",children:c.name})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Client Information"}),c.client_name?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Client Name"}),e.jsx("p",{className:"text-base text-gray-900",children:c.client_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Kementrian"}),e.jsx("p",{className:"text-base text-gray-900",children:c.client_kementrian})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Alamat"}),e.jsx("p",{className:"text-base text-gray-900",children:c.client_alamat})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Kode Satker"}),e.jsx("p",{className:"text-base text-gray-900",children:c.client_kode_satker})]})]}):e.jsx("div",{className:"flex items-center justify-center py-8 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("p",{className:"mt-2 text-sm",children:"No client assigned yet"}),e.jsx("p",{className:"text-xs text-gray-400",children:'Click "Edit Project" to assign a client'})]})})]})]}),e.jsxs("button",{onClick:mt,className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors ml-4",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Project"]})]})})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Team Members"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage team members and their roles in this project"})]}),e.jsxs("button",{onClick:()=>B(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors inline-flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Team Member"]})]}),N&&N.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.user_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.user_email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.user_position||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.role==="partner"?"bg-purple-100 text-purple-800":t.role==="manager"?"bg-blue-100 text-blue-800":t.role==="supervisor"?"bg-indigo-100 text-indigo-800":t.role==="team leader"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.role})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>ht(t),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit Role"}),e.jsx("button",{onClick:()=>ft(t),className:"text-red-600 hover:text-red-900",children:"Remove"})]})]},t.id))})]})}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No team members"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding team members to this project."})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Working Steps Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage working steps and tasks for this project template"})]}),e.jsx("button",{onClick:()=>P(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Add New Working Step"})]})})}),e.jsxs(Ct,{sensors:qe,collisionDetection:_t,onDragStart:bt,onDragOver:yt,onDragEnd:vt,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ce,{items:(m||[]).map(t=>`step-${t.id}`),strategy:_e,children:(m||[]).map(t=>e.jsxs("div",{className:"bg-white shadow-sm sm:rounded-lg",children:[e.jsx(Lt,{step:t,isCollapsed:E.has(t.id),onToggleCollapse:()=>Ne(t.id),children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>{ne(t.id),O("working_step_id",t.id),H(!0)},className:"inline-flex items-center justify-center bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Task"]}),e.jsxs("button",{onClick:()=>dt(t),className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Step"]}),e.jsxs("button",{onClick:()=>rt(t),className:"inline-flex items-center justify-center bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Step"]})]})}),!E.has(t.id)&&e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("div",{className:"px-2 pb-2 pt-5",children:e.jsx("h5",{className:"text-sm font-medium text-gray-600 mb-3",children:"Tasks:"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(Ce,{items:(t.tasks||[]).map(a=>`substep-${a.id}`),strategy:_e,children:(t.tasks||[]).map(a=>e.jsx(zt,{task:a,onEdit:ot,onDelete:r=>it(a)},a.id))})})]}),E.has(t.id)&&e.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>Ne(t.id),children:e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:[t.tasks?t.tasks.length:0," task",(t.tasks?t.tasks.length:0)!==1?"s":""," hidden â€¢ Click to expand"]})}),!E.has(t.id)&&(!t.tasks||t.tasks.length===0)&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx("div",{className:"text-center py-6 text-gray-500 bg-gray-50 rounded-lg mx-2",children:e.jsx("p",{children:'No tasks yet. Click "Add Task" to get started.'})})})]},t.id))}),(!m||m.length===0)&&e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No working steps"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first working step."})]})})})]}),e.jsx(Tt,{children:M?e.jsx("div",{className:"bg-white shadow-lg rounded-lg p-4 opacity-90",children:e.jsxs("h3",{className:"text-lg font-semibold text-primary-700",children:["ðŸ”¹ ",M.name]})}):u?e.jsx("div",{className:"bg-white shadow-lg rounded-lg p-4 opacity-90",children:e.jsx("h4",{className:"font-medium text-gray-900",children:u.name})}):null})]})]})}),Ee&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>{P(!1),se(),U("name","")}}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:st,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Working Step"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"step_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Working Step Name"}),e.jsx("input",{type:"text",id:"step_name",value:Fe.name,onChange:t=>U("name",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Perikatan, Perencanaan, Pelaksanaan",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Note: You can add tasks after creating the working step"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{P(!1),se(),U("name","")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:"Create Working Step"})]})]})})]})}),Le&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>H(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:at,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Task"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"task_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Name"}),e.jsx("input",{type:"text",id:"task_name",value:pe.name,onChange:t=>O("name",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Penetapan KAP",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:pe.is_required,onChange:t=>O("is_required",t.target.checked),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Required to unlock next step"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"This task must be completed before the next step can be accessed"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>H(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:"Add Task"})]})]})})]})}),Ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Project"}),e.jsxs("form",{onSubmit:xt,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project Name"}),e.jsx("input",{type:"text",value:S.name,onChange:t=>K("name",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),V.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:V.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Client"}),e.jsx(we,{options:A.map(t=>({value:t.id,label:t.name,subtitle:`${t.kementrian} - ${t.alamat}`})),value:S.client_id,onChange:t=>K("client_id",t),placeholder:"Select Client"}),V.client_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:V.client_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Project Status"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>K("status",S.status==="open"?"closed":"open"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ${S.status==="open"?"bg-green-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${S.status==="open"?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:`text-sm font-medium ${S.status==="open"?"text-green-700":"text-gray-700"}`,children:S.status==="open"?e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Open - Project is active"]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Closed - Project is inactive"]})})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:S.status==="open"?"Open projects are accessible to assigned team members":"Closed projects are archived and read-only"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{Y(!1),be()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:je,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50",children:je?"Updating...":"Update Project"})]})]})]})}),ze&&J&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Step"}),e.jsxs("form",{onSubmit:ct,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Step Name"}),e.jsx("input",{type:"text",value:Ke.name,onChange:t=>ue("name",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),ge.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:ge.name})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{G(!1),Q(null),fe()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:he,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50",children:he?"Updating...":"Update Step"})]})]})]})}),Ae&&X&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>W(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:pt,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Task"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit_task_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Name"}),e.jsx("input",{type:"text",id:"edit_task_name",value:h.name,onChange:t=>C("name",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"client_interact",className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Interaction Level"}),e.jsxs("select",{id:"client_interact",value:h.client_interact,onChange:t=>C("client_interact",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"read only",children:"ðŸ‘ï¸ Read Only - Client can only view"}),e.jsx("option",{value:"comment",children:"ðŸ’¬ Comment - Client can view and comment"}),e.jsx("option",{value:"upload",children:"ðŸ“¤ Upload - Client can upload files"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Set how clients can interact with this task"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:h.multiple_files,onChange:t=>C("multiple_files",t.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Multiple Files"})]}),e.jsxs("label",{className:"flex items-start space-x-2",children:[e.jsx("input",{type:"checkbox",checked:h.is_required,onChange:t=>C("is_required",t.target.checked),className:"mt-1 w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Required to unlock next step"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Must be completed before next step can be accessed"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"workers",className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Team Members"}),e.jsx(we,{multiple:!0,options:N.map(t=>({value:t.id,label:t.user_name,subtitle:`${t.user_email} - ${t.role}`})),value:h.worker_ids,onChange:t=>C("worker_ids",t),placeholder:"Select team members..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"âœ… Approval Required From"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Select roles that need to approve this task (in order)"}),e.jsx("div",{className:"space-y-2",children:["partner","manager","supervisor","team leader"].map(t=>e.jsxs("label",{className:"flex items-center space-x-3 p-2 border rounded hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.approval_roles.includes(t),onChange:a=>{a.target.checked?C("approval_roles",[...h.approval_roles,t]):C("approval_roles",h.approval_roles.filter(r=>r!==t))},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:t}),h.approval_roles.includes(t)&&e.jsxs("span",{className:"ml-2 text-xs text-blue-600",children:["(Order: ",h.approval_roles.indexOf(t)+1,")"]})]})]},t))}),h.approval_roles.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-blue-800 mb-1",children:"Approval Flow:"}),e.jsx("p",{className:"text-sm text-blue-700",children:h.approval_roles.map((t,a)=>e.jsxs("span",{children:[a>0&&" â†’ ",e.jsx("span",{className:"capitalize font-medium",children:t})]},t))})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>W(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:"Update Task"})]})]})})]})}),Re&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>B(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:ut,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Team Member"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"user_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select User"}),e.jsxs("select",{id:"user_id",value:ve.user_id,onChange:t=>ae("user_id",parseInt(t.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[e.jsx("option",{value:0,children:"Select a user..."}),z.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.email,")"]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role in Project"}),e.jsxs("select",{id:"role",value:ve.role,onChange:t=>ae("role",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"team leader",children:"Team Leader"}),e.jsx("option",{value:"supervisor",children:"Supervisor"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"partner",children:"Partner"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>B(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700",children:"Add Member"})]})]})})]})}),Pe&&F&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>q(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:gt,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Team Member Role"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[e.jsx("strong",{children:"Member:"})," ",F.user_name]}),e.jsx("label",{htmlFor:"edit_role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role in Project"}),e.jsxs("select",{id:"edit_role",value:Ze.role,onChange:t=>ye("role",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"team leader",children:"Team Leader"}),e.jsx("option",{value:"supervisor",children:"Supervisor"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"partner",children:"Partner"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Update Role"})]})]})})]})}),e.jsx(re,{show:He,onClose:()=>ce(!1),onConfirm:nt,title:"Delete Working Step",message:`Are you sure you want to delete "${k?.name}" and all its tasks? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"}),e.jsx(re,{show:We,onClose:()=>me(!1),onConfirm:lt,title:"Delete Sub-Step",message:`Are you sure you want to delete "${k?.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"}),e.jsx(re,{show:Be,onClose:()=>xe(!1),onConfirm:jt,title:"Remove Team Member",message:`Are you sure you want to remove "${k?.name}" from this project team?`,confirmText:"Remove",cancelText:"Cancel",type:"warning"})]})}export{Ut as default};
