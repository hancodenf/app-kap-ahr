import{r as l,u as M,j as e,H as kt,L as wt,b,c as we}from"./app-DXo1r5rC.js";import{A as St}from"./AuthenticatedLayout-CODwulK2.js";import{C as ie}from"./ConfirmDialog-BMExkSix.js";import{S as G}from"./SearchableSelect-BI67RZUB.js";import{u as Ct,a as Se,D as _t,c as Tt,S as Ce,v as _e,b as Mt,s as Dt,K as Et,P as Lt,d as Te,e as Me,C as De}from"./sortable.esm-CSxtpljl.js";import"./ApplicationLogo-Chyc4ICs.js";import"./transition-tXkMTf-z.js";import"./dialog-qBzyC3gm.js";import"./index-D3e33BFV.js";function At({step:c,children:o,isCollapsed:S,onToggleCollapse:k}){const{attributes:R,listeners:_,setNodeRef:x,transform:T,transition:D,isDragging:E}=Me({id:`step-${c.id}`}),h={transform:De.Transform.toString(T),transition:D,opacity:E?.5:1};return e.jsx("div",{ref:x,style:h,className:"bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{...R,..._,className:"cursor-grab active:cursor-grabbing mr-3 p-1 hover:bg-gray-100 rounded",style:{touchAction:"none"},children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"})})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-primary-700 mb-2 flex items-center",children:["ðŸ”¹ ",c.name,e.jsx("button",{onClick:k,className:"ml-3 p-1 hover:bg-gray-200 rounded transition-colors",title:S?"Expand substeps":"Collapse substeps",children:e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${S?"rotate-0":"rotate-90"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]}),e.jsx("div",{className:"h-1 w-20 bg-primary-600 rounded"})]})]}),e.jsx("div",{className:"ml-8 md:ml-0",children:o})]})})})}function zt({task:c,onEdit:o,onDelete:S}){const{attributes:k,listeners:R,setNodeRef:_,transform:x,transition:T,isDragging:D}=Me({id:`substep-${c.id}`}),E={transform:De.Transform.toString(x),transition:T,opacity:D?.5:1};return e.jsx("div",{ref:_,style:E,className:"w-full bg-gray-50 border-b border-gray-200 last:border-b-0",children:e.jsxs("div",{className:"px-6 py-4 flex items-center hover:bg-gray-100 transition-colors",children:[e.jsx("div",{...k,...R,className:"cursor-grab active:cursor-grabbing p-2 hover:bg-gray-200 rounded mr-4 flex-shrink-0",style:{touchAction:"none"},onClick:h=>h.stopPropagation(),children:e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-base truncate",children:c.name}),(!!c.is_required||c.client_interact!=="read only"||!!c.multiple_files||c.task_workers&&c.task_workers.length>0)&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[!!c.is_required&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 border border-red-200",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Required"]}),c.client_interact!=="read only"&&e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:c.client_interact==="comment"?"ðŸ’¬ Client Comment":"ðŸ“¤ Client Upload"}),!!c.multiple_files&&e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Multiple Files"}),c.task_workers&&c.task_workers.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:c.task_workers.map((h,W)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",title:`${h.worker_email} - ${h.worker_role}`,children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),h.worker_name]},W))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4 flex-shrink-0",children:[e.jsxs("button",{onClick:h=>{h.stopPropagation(),o(c)},className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:h=>{h.stopPropagation(),S(c.id)},className:"inline-flex items-center justify-center bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})})}function Ot({auth:c,bundle:o,workingSteps:S,teamMembers:k,availableUsers:R,clients:_}){const[x,T]=l.useState(S||[]),[D,E]=l.useState(null),[h,W]=l.useState(null),[Ee,B]=l.useState(!1),[Le,F]=l.useState(!1),[Ae,J]=l.useState(!1),[ze,q]=l.useState(!1),[Pe,Q]=l.useState(!1),[Re,$]=l.useState(!1),[Ie,U]=l.useState(!1),[Pt,le]=l.useState(null),[X,Z]=l.useState(null),[ee,oe]=l.useState(null),[O,de]=l.useState(null),[te,ce]=l.useState(!1),[L,me]=l.useState(new Set),[Y,se]=l.useState(null),[He,xe]=l.useState(!1),[We,pe]=l.useState(!1),[Be,ue]=l.useState(!1),[w,ae]=l.useState(null),Fe=Ct(Se(Lt,{activationConstraint:{distance:8}}),Se(Et,{coordinateGetter:Dt}));l.useEffect(()=>{let t;const s=i=>{const p=window.innerHeight,y=i,P=p-i;y<100?window.scrollBy(0,-10):P<100&&window.scrollBy(0,10)},a=i=>{if(!te)return;t&&clearInterval(t);const m=100,f=i.clientY,p=window.innerHeight-i.clientY;(f<m||p<m)&&(t=setInterval(()=>{s(i.clientY)},16))},n=()=>{t&&clearInterval(t)};return te&&(document.addEventListener("pointermove",a),document.addEventListener("pointerup",n)),()=>{t&&clearInterval(t),document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",n)}},[te]),l.useEffect(()=>{T(S||[])},[S]);const{data:qe,setData:K,post:$e,reset:re}=M({name:"",bundle_id:o.id}),{data:V,setData:A,post:Ue,reset:Oe}=M({name:"",working_step_id:0,client_interact:"read only",multiple_files:!1,is_required:!1}),{data:Ye,setData:he,put:Ke,processing:ge,errors:fe,reset:je}=M({name:""}),{data:v,setData:I,put:Ve,processing:be,errors:z,reset:ve}=M({name:"",client_id:0,year:new Date().getFullYear(),status:"closed"}),Ge=l.useMemo(()=>{const t=new Date().getFullYear(),a=(_.find(n=>n.id===v.client_id)?.used_years||[]).map(n=>Number(n));return Array.from({length:t-1999},(n,i)=>{const m=t-i;return{value:m,label:m.toString(),isDisabled:a.includes(m)}})},[v.client_id,_]),{data:g,setData:C,put:Je,reset:Qe}=M({name:"",client_interact:"read only",multiple_files:!1,is_required:!1,worker_ids:[],approval_roles:[]}),{data:ye,setData:ne,post:Xe,reset:Ze}=M({project_id:o.id,user_id:0,role:"member"}),{data:et,setData:Ne,put:tt,reset:st}=M({role:"member"}),at=t=>{t.preventDefault(),$e(route("admin.projects.working-steps.store"),{onSuccess:()=>{B(!1),re(),K("name",""),b.reload()}})},rt=t=>{t.preventDefault(),Ue(route("admin.projects.tasks.store"),{onSuccess:s=>{F(!1),Oe(),le(null),A({name:"",working_step_id:0}),b.reload()},onError:s=>{console.error("Error adding task:",s)}})},nt=t=>{ae({id:t.id,name:t.name}),xe(!0)},it=()=>{w&&b.delete(route("admin.projects.working-steps.destroy",w.id))},lt=t=>{ae({id:t.id,name:t.name}),pe(!0)},ot=()=>{w&&b.delete(route("admin.projects.tasks.destroy",w.id))},dt=t=>{oe(t);const s=(t.task_workers?.map(n=>n.project_team_id)||[]).filter(n=>k.some(i=>i.id===n)),a=(t.task_approvals||[]).sort((n,i)=>n.order-i.order).map(n=>n.role);C({name:t.name,client_interact:t.client_interact,multiple_files:t.multiple_files,is_required:t.is_required||!1,worker_ids:s,approval_roles:a}),q(!0)},ct=t=>{Z({id:t.id,name:t.name}),he({name:t.name}),J(!0)},mt=t=>{t.preventDefault(),X&&Ke(route("admin.projects.working-steps.update",X.id),{onSuccess:()=>{J(!1),Z(null),je(),b.reload()}})},xt=()=>{I({name:o.name,client_id:o.client_id||0,year:o.year||new Date().getFullYear(),status:o.status||"closed"}),Q(!0)},pt=t=>{t.preventDefault(),Ve(route("admin.projects.bundles.update",o.id),{onSuccess:()=>{Q(!1),ve(),b.reload()}})},ut=t=>{t.preventDefault(),ee&&Je(route("admin.projects.tasks.update",ee.id),{onSuccess:()=>{q(!1),oe(null),Qe(),b.reload()}})},ht=t=>{t.preventDefault(),Xe(route("admin.projects.team-members.store"),{onSuccess:()=>{$(!1),Ze(),ne({project_id:o.id,user_id:0,role:"member"}),b.reload()}})},gt=t=>{de(t),Ne({role:t.role}),U(!0)},ft=t=>{t.preventDefault(),O&&tt(route("admin.projects.team-members.update",O.id),{onSuccess:()=>{U(!1),de(null),st(),b.reload()}})},jt=t=>{ae({id:t.id,name:t.user_name}),ue(!0)},bt=()=>{w&&b.delete(route("admin.projects.team-members.destroy",w.id))},ke=t=>{me(s=>{const a=new Set(s);return a.has(t)?a.delete(t):a.add(t),a})};l.useEffect(()=>{if(Y&&L.has(Y)){const t=setTimeout(()=>{me(s=>{const a=new Set(s);return a.delete(Y),a})},800);return()=>clearTimeout(t)}},[Y,L]);const vt=t=>{const{active:s}=t;if(ce(!0),String(s.id).startsWith("substep-")){const a=Number(String(s.id).replace("substep-",""));for(const n of x){const i=n.tasks?.find(m=>m.id===a);if(i){W(i);return}}}if(String(s.id).startsWith("step-")){const a=Number(String(s.id).replace("step-","")),n=x.find(i=>i.id===a);if(n){E(n);return}}},yt=t=>{const{active:s,over:a}=t;if(E(null),W(null),ce(!1),se(null),!!a){if(String(s.id).startsWith("step-")){const n=Number(String(s.id).replace("step-","")),i=Number(String(a.id).replace("step-","")),m=x.findIndex(p=>p.id===n),f=x.findIndex(p=>p.id===i);if(m!==f){const y=Te(x,m,f).map((r,d)=>({...r,order:d+1}));T(y);const P=y.map(r=>({id:r.id,order:r.order}));we.post(route("admin.projects.working-steps.reorder"),{steps:P}).then(r=>{}).catch(r=>{console.error("Error reordering steps:",r),alert("Failed to save step order. Please try again."),b.reload()})}return}if(String(s.id).startsWith("substep-")){const n=Number(String(s.id).replace("substep-",""));let i=0,m=null;for(const r of x){const d=r.tasks?.find(j=>j.id===n);if(d){m=d,i=r.id;break}}if(!m)return;let f=i,p=null;if(String(a.id).startsWith("step-"))f=Number(String(a.id).replace("step-",""));else if(String(a.id).startsWith("substep-")){p=Number(String(a.id).replace("substep-",""));for(const r of x)if(r.tasks?.some(d=>d.id===p)){f=r.id;break}}const y=[...x];if(i===f&&p){const r=y.find(d=>d.id===i);if(r?.tasks){const d=r.tasks.findIndex(u=>u.id===n),j=r.tasks.findIndex(u=>u.id===p);d!==j&&d>-1&&j>-1&&(r.tasks=Te(r.tasks,d,j),r.tasks=r.tasks.map((u,N)=>({...u,order:N+1})))}}else if(i!==f){const r=y.find(d=>d.id===i);if(r?.tasks){const d=r.tasks.findIndex(j=>j.id===n);if(d>-1){const[j]=r.tasks.splice(d,1),u=y.find(N=>N.id===f);if(u){if(u.tasks||(u.tasks=[]),j.working_step_id=f,p){const N=u.tasks.findIndex(H=>H.id===p);N>-1?u.tasks.splice(N,0,j):u.tasks.push(j)}else u.tasks.push(j);u.tasks=u.tasks.map((N,H)=>({...N,order:H+1})),r.tasks=r.tasks.map((N,H)=>({...N,order:H+1}))}}}}T(y);const P=[];y.forEach(r=>{r.tasks&&r.tasks.forEach(d=>{P.push({id:d.id,order:d.order,working_step_id:d.working_step_id})})}),we.post(route("admin.projects.tasks.reorder"),{tasks:P}).then(r=>{}).catch(r=>{console.error("Error reordering tasks:",r),alert("Failed to save task order. Please try again."),b.reload()})}}},Nt=t=>{const{active:s,over:a}=t;if(String(s.id).startsWith("substep-")&&a&&String(a.id).startsWith("step-")){const n=Number(String(a.id).replace("step-",""));se(n)}else se(null)};return e.jsxs(St,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:[o.name," - Project Steps"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[x?.length||0," working steps"]})]}),e.jsx(wt,{href:route("admin.projects.bundles.index"),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Back to Projects"})]}),children:[e.jsx(kt,{title:`${o.name} - Project Steps`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Project Name"}),e.jsx("div",{className:"flex items-center",children:o.status==="open"?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Project Active"]}):e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-700 border border-gray-300",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Project Closed"]})})]}),e.jsx("p",{className:"text-xl font-semibold text-gray-800",children:o.name})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Client Information"}),o.client_name?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Client Name"}),e.jsx("p",{className:"text-base text-gray-900",children:o.client_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Kementrian"}),e.jsx("p",{className:"text-base text-gray-900",children:o.client_kementrian})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Alamat"}),e.jsx("p",{className:"text-base text-gray-900",children:o.client_alamat})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Kode Satker"}),e.jsx("p",{className:"text-base text-gray-900",children:o.client_kode_satker})]})]}):e.jsx("div",{className:"flex items-center justify-center py-8 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("p",{className:"mt-2 text-sm",children:"No client assigned yet"}),e.jsx("p",{className:"text-xs text-gray-400",children:'Click "Edit Project" to assign a client'})]})})]})]}),e.jsxs("button",{onClick:xt,className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors ml-4",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Project"]})]})})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Team Members"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage team members and their roles in this project"})]}),e.jsxs("button",{onClick:()=>$(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors inline-flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Team Member"]})]}),k&&k.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.user_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.user_email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.user_position||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.role==="partner"?"bg-purple-100 text-purple-800":t.role==="manager"?"bg-blue-100 text-blue-800":t.role==="supervisor"?"bg-indigo-100 text-indigo-800":t.role==="team leader"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.role})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>gt(t),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit Role"}),e.jsx("button",{onClick:()=>jt(t),className:"text-red-600 hover:text-red-900",children:"Remove"})]})]},t.id))})]})}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No team members"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding team members to this project."})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Working Steps Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage working steps and tasks for this project template"})]}),e.jsx("button",{onClick:()=>B(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Add New Working Step"})]})})}),e.jsxs(_t,{sensors:Fe,collisionDetection:Tt,onDragStart:vt,onDragOver:Nt,onDragEnd:yt,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ce,{items:(x||[]).map(t=>`step-${t.id}`),strategy:_e,children:(x||[]).map(t=>e.jsxs("div",{className:"bg-white shadow-sm sm:rounded-lg",children:[e.jsx(At,{step:t,isCollapsed:L.has(t.id),onToggleCollapse:()=>ke(t.id),children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>{le(t.id),A("working_step_id",t.id),F(!0)},className:"inline-flex items-center justify-center bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Task"]}),e.jsxs("button",{onClick:()=>ct(t),className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Step"]}),e.jsxs("button",{onClick:()=>nt(t),className:"inline-flex items-center justify-center bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Step"]})]})}),!L.has(t.id)&&e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("div",{className:"px-2 pb-2 pt-5",children:e.jsx("h5",{className:"text-sm font-medium text-gray-600 mb-3",children:"Tasks:"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(Ce,{items:(t.tasks||[]).map(s=>`substep-${s.id}`),strategy:_e,children:(t.tasks||[]).map(s=>e.jsx(zt,{task:s,onEdit:dt,onDelete:a=>lt(s)},s.id))})})]}),L.has(t.id)&&e.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>ke(t.id),children:e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:[t.tasks?t.tasks.length:0," task",(t.tasks?t.tasks.length:0)!==1?"s":""," hidden â€¢ Click to expand"]})}),!L.has(t.id)&&(!t.tasks||t.tasks.length===0)&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx("div",{className:"text-center py-6 text-gray-500 bg-gray-50 rounded-lg mx-2",children:e.jsx("p",{children:'No tasks yet. Click "Add Task" to get started.'})})})]},t.id))}),(!x||x.length===0)&&e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No working steps"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first working step."})]})})})]}),e.jsx(Mt,{children:D?e.jsx("div",{className:"bg-white shadow-lg rounded-lg p-4 opacity-90",children:e.jsxs("h3",{className:"text-lg font-semibold text-primary-700",children:["ðŸ”¹ ",D.name]})}):h?e.jsx("div",{className:"bg-white shadow-lg rounded-lg p-4 opacity-90",children:e.jsx("h4",{className:"font-medium text-gray-900",children:h.name})}):null})]})]})}),Ee&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>{B(!1),re(),K("name","")}}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:at,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Working Step"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"step_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Working Step Name"}),e.jsx("input",{type:"text",id:"step_name",value:qe.name,onChange:t=>K("name",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Perikatan, Perencanaan, Pelaksanaan",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Note: You can add tasks after creating the working step"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{B(!1),re(),K("name","")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:"Create Working Step"})]})]})})]})}),Le&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>F(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:rt,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Task"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"task_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Name"}),e.jsx("input",{type:"text",id:"task_name",value:V.name,onChange:t=>A("name",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Penetapan KAP",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"add_task_client_interact",className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Interaction Level"}),e.jsxs("select",{id:"add_task_client_interact",value:V.client_interact,onChange:t=>A("client_interact",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"read only",children:"ðŸ‘ï¸ Read Only - Client can only view"}),e.jsx("option",{value:"comment",children:"ðŸ’¬ Comment - Client can view and comment"}),e.jsx("option",{value:"upload",children:"ðŸ“¤ Upload - Client can upload files"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Set how clients can interact with this task"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:V.multiple_files,onChange:t=>A("multiple_files",t.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Multiple Files"})]}),e.jsxs("label",{className:"flex items-start space-x-2",children:[e.jsx("input",{type:"checkbox",checked:V.is_required,onChange:t=>A("is_required",t.target.checked),className:"mt-1 w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Required to unlock next step"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Must be completed before next step can be accessed"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>F(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:"Add Task"})]})]})})]})}),Pe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Project"}),e.jsxs("form",{onSubmit:pt,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project Name"}),e.jsx("input",{type:"text",value:v.name,onChange:t=>I("name",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),z.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Client"}),e.jsx(G,{options:_.map(t=>({value:t.id,label:t.name,subtitle:`${t.kementrian} - ${t.alamat}`})),value:v.client_id,onChange:t=>I("client_id",t),placeholder:"Select Client"}),z.client_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.client_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project Year"}),e.jsx(G,{options:Ge,value:v.year,onChange:t=>I("year",t),placeholder:"Select project year..."}),z.year&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Project Status"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>I("status",v.status==="open"?"closed":"open"),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 ${v.status==="open"?"bg-green-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${v.status==="open"?"translate-x-6":"translate-x-1"}`})}),e.jsx("span",{className:`text-sm font-medium ${v.status==="open"?"text-green-700":"text-gray-700"}`,children:v.status==="open"?e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Open - Project is active"]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Closed - Project is inactive"]})})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:v.status==="open"?"Open projects are accessible to assigned team members":"Closed projects are archived and read-only"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{Q(!1),ve()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:be,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50",children:be?"Updating...":"Update Project"})]})]})]})}),Ae&&X&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Step"}),e.jsxs("form",{onSubmit:mt,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Step Name"}),e.jsx("input",{type:"text",value:Ye.name,onChange:t=>he("name",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),fe.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:fe.name})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{J(!1),Z(null),je()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ge,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50",children:ge?"Updating...":"Update Step"})]})]})]})}),ze&&ee&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>q(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:ut,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Task"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit_task_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Name"}),e.jsx("input",{type:"text",id:"edit_task_name",value:g.name,onChange:t=>C("name",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"client_interact",className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Interaction Level"}),e.jsxs("select",{id:"client_interact",value:g.client_interact,onChange:t=>C("client_interact",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"read only",children:"ðŸ‘ï¸ Read Only - Client can only view"}),e.jsx("option",{value:"comment",children:"ðŸ’¬ Comment - Client can view and comment"}),e.jsx("option",{value:"upload",children:"ðŸ“¤ Upload - Client can upload files"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Set how clients can interact with this task"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.multiple_files,onChange:t=>C("multiple_files",t.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Multiple Files"})]}),e.jsxs("label",{className:"flex items-start space-x-2",children:[e.jsx("input",{type:"checkbox",checked:g.is_required,onChange:t=>C("is_required",t.target.checked),className:"mt-1 w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Required to unlock next step"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Must be completed before next step can be accessed"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"workers",className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Team Members"}),e.jsx(G,{multiple:!0,options:k.map(t=>({value:t.id,label:t.user_name,subtitle:`${t.user_email} - ${t.role}`})),value:g.worker_ids,onChange:t=>C("worker_ids",t),placeholder:"Select team members..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"âœ… Approval Required From"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Select roles that need to approve this task. Will be automatically ordered by priority."}),e.jsx("div",{className:"space-y-2",children:["team leader","supervisor","manager","partner"].map(t=>{const s={"team leader":1,supervisor:2,manager:3,partner:4},n=[...g.approval_roles].sort((i,m)=>s[i]-s[m]).indexOf(t)+1;return e.jsxs("label",{className:"flex items-center space-x-3 p-2 border rounded hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.approval_roles.includes(t),onChange:i=>{i.target.checked?C("approval_roles",[...g.approval_roles,t]):C("approval_roles",g.approval_roles.filter(m=>m!==t))},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:t}),e.jsxs("span",{className:"text-xs text-gray-400",children:["Priority: ",s[t]]})]}),g.approval_roles.includes(t)&&e.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-100 px-2 py-1 rounded",children:["Order: ",n]})]},t)})}),g.approval_roles.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs font-medium text-blue-800 mb-1",children:"âœ“ Approval Flow (Auto-sorted by priority):"}),e.jsx("p",{className:"text-sm text-blue-700 font-medium",children:(()=>{const t={"team leader":1,supervisor:2,manager:3,partner:4};return[...g.approval_roles].sort((s,a)=>t[s]-t[a]).map((s,a)=>e.jsxs("span",{children:[a>0&&" â†’ ",e.jsxs("span",{className:"capitalize",children:[a+1,". ",s]})]},s))})()})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:"Update Task"})]})]})})]})}),Re&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>$(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:ht,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Team Member"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"user_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select User"}),e.jsx(G,{options:R.map(t=>({value:t.id,label:t.name,subtitle:t.email})),value:ye.user_id,onChange:t=>ne("user_id",t),placeholder:"Search and select user..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role in Project"}),e.jsxs("select",{id:"role",value:ye.role,onChange:t=>ne("role",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"team leader",children:"Team Leader"}),e.jsx("option",{value:"supervisor",children:"Supervisor"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"partner",children:"Partner"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>$(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700",children:"Add Member"})]})]})})]})}),Ie&&O&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>U(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:ft,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Team Member Role"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[e.jsx("strong",{children:"Member:"})," ",O.user_name]}),e.jsx("label",{htmlFor:"edit_role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role in Project"}),e.jsxs("select",{id:"edit_role",value:et.role,onChange:t=>Ne("role",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"team leader",children:"Team Leader"}),e.jsx("option",{value:"supervisor",children:"Supervisor"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"partner",children:"Partner"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>U(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Update Role"})]})]})})]})}),e.jsx(ie,{show:He,onClose:()=>xe(!1),onConfirm:it,title:"Delete Working Step",message:`Are you sure you want to delete "${w?.name}" and all its tasks? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"}),e.jsx(ie,{show:We,onClose:()=>pe(!1),onConfirm:ot,title:"Delete Sub-Step",message:`Are you sure you want to delete "${w?.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"}),e.jsx(ie,{show:Be,onClose:()=>ue(!1),onConfirm:bt,title:"Remove Team Member",message:`Are you sure you want to remove "${w?.name}" from this project team?`,confirmText:"Remove",cancelText:"Cancel",type:"warning"})]})}export{Ot as default};
