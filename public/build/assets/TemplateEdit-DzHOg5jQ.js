import{r as l,u as L,j as e,H as Qe,L as Xe,b as y,c as me}from"./app-ClcqIkg_.js";import{A as Ze}from"./AuthenticatedLayout-Brdiehg9.js";import{C as pe}from"./ConfirmDialog-BxMyHJ_q.js";import{u as et,a as xe,D as tt,c as st,S as ue,v as he,b as at,d as ge,s as rt,K as nt,P as it,e as fe,C as be}from"./sortable.esm-BqP7ZRN_.js";import"./ApplicationLogo-Pq6XhuR0.js";import"./transition-BipoX0Bg.js";import"./dialog-CEOT2S1J.js";import"./index-f1MmAGuD.js";function lt({step:p,children:f,isCollapsed:v,onToggleCollapse:d}){const{attributes:k,listeners:N,setNodeRef:w,transform:S,transition:_,isDragging:E}=fe({id:`step-${p.id}`}),x={transform:be.Transform.toString(S),transition:_,opacity:E?.5:1};return e.jsx("div",{ref:w,style:x,className:"bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 pb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{...k,...N,className:"cursor-grab active:cursor-grabbing mr-3 p-1 hover:bg-gray-100 rounded",style:{touchAction:"none"},children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"})})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-primary-700 mb-2 flex items-center",children:["ðŸ”¹ ",p.name,e.jsx("button",{onClick:d,className:"ml-3 p-1 hover:bg-gray-200 rounded transition-colors",title:v?"Expand tasks":"Collapse tasks",children:e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${v?"rotate-0":"rotate-90"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]}),e.jsx("div",{className:"h-1 w-20 bg-primary-600 rounded"})]})]}),e.jsx("div",{className:"ml-8 md:ml-0",children:f})]})})})}function dt({task:p,onEdit:f,onDelete:v}){const{attributes:d,listeners:k,setNodeRef:N,transform:w,transition:S,isDragging:_}=fe({id:`task-${p.id}`}),E={transform:be.Transform.toString(w),transition:S,opacity:_?.5:1};return e.jsx("div",{ref:N,style:E,className:"w-full bg-gray-50 border-b border-gray-200 last:border-b-0",children:e.jsxs("div",{className:"px-6 py-4 flex items-center hover:bg-gray-100 transition-colors",children:[e.jsx("div",{...d,...k,className:"cursor-grab active:cursor-grabbing p-2 hover:bg-gray-200 rounded mr-4 flex-shrink-0",style:{touchAction:"none"},onClick:x=>x.stopPropagation(),children:e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 16a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-base truncate",children:p.name}),(p.is_required||p.client_interact||p.multiple_files)&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[p.is_required&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800 border border-red-200",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Required"]}),p.client_interact&&e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Client Interact"}),p.multiple_files&&e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Multiple Files"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4 flex-shrink-0",children:[e.jsxs("button",{onClick:x=>{x.stopPropagation(),f(p)},className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs("button",{onClick:x=>{x.stopPropagation(),v(p.id)},className:"inline-flex items-center justify-center bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})})}function bt({auth:p,bundle:f,workingSteps:v}){const[d,k]=l.useState(v||[]),[N,w]=l.useState(null),[S,_]=l.useState(null),[E,x]=l.useState(!1),[je,A]=l.useState(!1),[ye,P]=l.useState(!1),[ve,H]=l.useState(!1),[ke,F]=l.useState(!1),[ot,Y]=l.useState(null),[R,U]=l.useState(null),[$,G]=l.useState(null),[O,J]=l.useState(!1),[T,Q]=l.useState(new Set),[W,V]=l.useState(null),[Ne,X]=l.useState(!1),[we,Z]=l.useState(!1),[C,ee]=l.useState(null),Se=et(xe(it,{activationConstraint:{distance:8}}),xe(nt,{coordinateGetter:rt}));l.useEffect(()=>{let t;const a=i=>{const c=window.innerHeight,b=i,D=c-i;b<100?window.scrollBy(0,-10):D<100&&window.scrollBy(0,10)},r=i=>{if(!O)return;t&&clearInterval(t);const g=100,u=i.clientY,c=window.innerHeight-i.clientY;(u<g||c<g)&&(t=setInterval(()=>{a(i.clientY)},16))},o=()=>{t&&clearInterval(t)};return O&&(document.addEventListener("pointermove",r),document.addEventListener("pointerup",o)),()=>{t&&clearInterval(t),document.removeEventListener("pointermove",r),document.removeEventListener("pointerup",o)}},[O]),l.useEffect(()=>{k(v||[])},[v]);const{data:_e,setData:z,post:Te,reset:K}=L({name:"",bundle_id:f.id}),{data:te,setData:q,post:Ce,reset:De}=L({name:"",template_working_step_id:0,is_required:!1}),{data:Ee,setData:se,put:Me,processing:ae,errors:re,reset:ne}=L({name:""}),{data:Ie,setData:ie,put:Le,processing:le,errors:de,reset:oe}=L({name:""}),{data:B,setData:M,put:Ae,reset:He}=L({name:"",client_interact:!1,multiple_files:!1,is_required:!1}),We=t=>{t.preventDefault(),Te(route("admin.project-templates.template-working-steps.store"),{onSuccess:()=>{x(!1),K(),z("name",""),y.reload()}})},ze=t=>{t.preventDefault(),Ce(route("admin.project-templates.template-tasks.store"),{onSuccess:a=>{A(!1),De(),Y(null),q({name:"",template_working_step_id:0}),y.reload()},onError:a=>{console.error("Error adding task:",a)}})},qe=t=>{ee({id:t.id,name:t.name}),X(!0)},Be=()=>{C&&y.delete(route("admin.project-templates.template-working-steps.destroy",C.id))},Pe=t=>{ee({id:t.id,name:t.name}),Z(!0)},Fe=()=>{C&&y.delete(route("admin.project-templates.template-tasks.destroy",C.id))},Re=t=>{G(t),M({name:t.name,client_interact:t.client_interact,multiple_files:t.multiple_files,is_required:t.is_required||!1}),H(!0)},Ue=t=>{U({id:t.id,name:t.name}),se({name:t.name}),P(!0)},$e=t=>{t.preventDefault(),R&&Me(route("admin.project-templates.template-working-steps.update",R.id),{onSuccess:()=>{P(!1),U(null),ne(),y.reload()}})},Oe=()=>{ie({name:f.name}),F(!0)},Ve=t=>{t.preventDefault(),Le(route("admin.project-templates.template-bundles.update",f.id),{onSuccess:()=>{F(!1),oe(),y.reload()}})},Ke=t=>{t.preventDefault(),$&&Ae(route("admin.project-templates.template-tasks.update",$.id),{onSuccess:()=>{H(!1),G(null),He(),y.reload()}})},ce=t=>{Q(a=>{const r=new Set(a);return r.has(t)?r.delete(t):r.add(t),r})};l.useEffect(()=>{if(W&&T.has(W)){const t=setTimeout(()=>{Q(a=>{const r=new Set(a);return r.delete(W),r})},800);return()=>clearTimeout(t)}},[W,T]);const Ye=t=>{const{active:a}=t;if(J(!0),String(a.id).startsWith("task-")){const r=Number(String(a.id).replace("task-",""));for(const o of d){const i=o.template_tasks?.find(g=>g.id===r);if(i){_(i);return}}}if(String(a.id).startsWith("step-")){const r=Number(String(a.id).replace("step-","")),o=d.find(i=>i.id===r);if(o){w(o);return}}},Ge=t=>{const{active:a,over:r}=t;if(w(null),_(null),J(!1),V(null),!!r){if(String(a.id).startsWith("step-")){const o=Number(String(a.id).replace("step-","")),i=Number(String(r.id).replace("step-","")),g=d.findIndex(c=>c.id===o),u=d.findIndex(c=>c.id===i);if(g!==u){const b=ge(d,g,u).map((s,n)=>({...s,order:n+1}));k(b);const D=b.map(s=>({id:s.id,order:s.order}));me.post(route("admin.project-templates.template-working-steps.reorder"),{steps:D}).then(s=>{}).catch(s=>{console.error("Error reordering steps:",s),alert("Failed to save step order. Please try again."),y.reload()})}return}if(String(a.id).startsWith("task-")){const o=Number(String(a.id).replace("task-",""));let i=0,g=null;for(const s of d){const n=s.template_tasks?.find(h=>h.id===o);if(n){g=n,i=s.id;break}}if(!g)return;let u=i,c=null;if(String(r.id).startsWith("step-"))u=Number(String(r.id).replace("step-",""));else if(String(r.id).startsWith("task-")){c=Number(String(r.id).replace("task-",""));for(const s of d)if(s.template_tasks?.some(n=>n.id===c)){u=s.id;break}}const b=[...d];if(i===u&&c){const s=b.find(n=>n.id===i);if(s?.template_tasks){const n=s.template_tasks.findIndex(m=>m.id===o),h=s.template_tasks.findIndex(m=>m.id===c);n!==h&&n>-1&&h>-1&&(s.template_tasks=ge(s.template_tasks,n,h),s.template_tasks=s.template_tasks.map((m,j)=>({...m,order:j+1})))}}else if(i!==u){const s=b.find(n=>n.id===i);if(s?.template_tasks){const n=s.template_tasks.findIndex(h=>h.id===o);if(n>-1){const[h]=s.template_tasks.splice(n,1),m=b.find(j=>j.id===u);if(m){if(m.template_tasks||(m.template_tasks=[]),h.template_working_step_id=u,c){const j=m.template_tasks.findIndex(I=>I.id===c);j>-1?m.template_tasks.splice(j,0,h):m.template_tasks.push(h)}else m.template_tasks.push(h);m.template_tasks=m.template_tasks.map((j,I)=>({...j,order:I+1})),s.template_tasks=s.template_tasks.map((j,I)=>({...j,order:I+1}))}}}}k(b);const D=[];b.forEach(s=>{s.template_tasks&&s.template_tasks.forEach(n=>{D.push({id:n.id,order:n.order,template_working_step_id:n.template_working_step_id})})}),me.post(route("admin.project-templates.template-tasks.reorder"),{tasks:D}).then(s=>{}).catch(s=>{console.error("Error reordering tasks:",s),alert("Failed to save task order. Please try again."),y.reload()})}}},Je=t=>{const{active:a,over:r}=t;if(String(a.id).startsWith("task-")&&r&&String(r.id).startsWith("step-")){const o=Number(String(r.id).replace("step-",""));V(o)}else V(null)};return e.jsxs(Ze,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:[f.name," - Template Steps"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[d?.length||0," working steps"]})]}),e.jsx(Xe,{href:route("admin.project-templates.template-bundles.index"),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Back to Templates"})]}),children:[e.jsx(Qe,{title:`${f.name} - Template Steps`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Project Template Name"}),e.jsx("p",{className:"text-xl font-semibold text-gray-800",children:f.name})]}),e.jsxs("button",{onClick:Oe,className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Template Name"]})]})})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Working Steps Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage working steps and tasks for this project template"})]}),e.jsx("button",{onClick:()=>x(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Add New Working Step"})]})})}),e.jsxs(tt,{sensors:Se,collisionDetection:st,onDragStart:Ye,onDragOver:Je,onDragEnd:Ge,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(ue,{items:(d||[]).map(t=>`step-${t.id}`),strategy:he,children:(d||[]).map(t=>e.jsxs("div",{className:"bg-white shadow-sm sm:rounded-lg",children:[e.jsx(lt,{step:t,isCollapsed:T.has(t.id),onToggleCollapse:()=>ce(t.id),children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>{Y(t.id),q("template_working_step_id",t.id),A(!0)},className:"inline-flex items-center justify-center bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Task"]}),e.jsxs("button",{onClick:()=>Ue(t),className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Step"]}),e.jsxs("button",{onClick:()=>qe(t),className:"inline-flex items-center justify-center bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Step"]})]})}),!T.has(t.id)&&e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("div",{className:"px-2 pb-2 pt-5",children:e.jsx("h5",{className:"text-sm font-medium text-gray-600 mb-3",children:"Tasks:"})}),e.jsx("div",{className:"space-y-1",children:e.jsx(ue,{items:(t.template_tasks||[]).map(a=>`task-${a.id}`),strategy:he,children:(t.template_tasks||[]).map(a=>e.jsx(dt,{task:a,onEdit:Re,onDelete:r=>Pe(a)},a.id))})})]}),T.has(t.id)&&e.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>ce(t.id),children:e.jsxs("p",{className:"text-sm text-gray-500 text-center",children:[t.template_tasks?t.template_tasks.length:0," task",(t.template_tasks?t.template_tasks.length:0)!==1?"s":""," hidden â€¢ Click to expand"]})}),!T.has(t.id)&&(!t.template_tasks||t.template_tasks.length===0)&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx("div",{className:"text-center py-6 text-gray-500 bg-gray-50 rounded-lg mx-2",children:e.jsx("p",{children:'No tasks yet. Click "Add Task" to get started.'})})})]},t.id))}),(!d||d.length===0)&&e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No working steps"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first working step."})]})})})]}),e.jsx(at,{children:N?e.jsx("div",{className:"bg-white shadow-lg rounded-lg p-4 opacity-90",children:e.jsxs("h3",{className:"text-lg font-semibold text-primary-700",children:["ðŸ”¹ ",N.name]})}):S?e.jsx("div",{className:"bg-white shadow-lg rounded-lg p-4 opacity-90",children:e.jsx("h4",{className:"font-medium text-gray-900",children:S.name})}):null})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>{x(!1),K(),z("name","")}}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:We,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Working Step"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"step_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Working Step Name"}),e.jsx("input",{type:"text",id:"step_name",value:_e.name,onChange:t=>z("name",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Perikatan, Perencanaan, Pelaksanaan",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Note: You can add tasks after creating the working step"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>{x(!1),K(),z("name","")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:"Create Working Step"})]})]})})]})}),je&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>A(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:ze,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add New Task"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"task_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Name"}),e.jsx("input",{type:"text",id:"task_name",value:te.name,onChange:t=>q("name",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Penetapan KAP",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:te.is_required,onChange:t=>q("is_required",t.target.checked),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Required to unlock next step"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"This task must be completed before the next step can be accessed"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:"Add Task"})]})]})})]})}),ke&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Project Template Name"}),e.jsxs("form",{onSubmit:Ve,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Template Name"}),e.jsx("input",{type:"text",value:Ie.name,onChange:t=>ie("name",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),de.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:de.name})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{F(!1),oe()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:le,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50",children:le?"Updating...":"Update Template"})]})]})]})}),ye&&R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit Step"}),e.jsxs("form",{onSubmit:$e,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Step Name"}),e.jsx("input",{type:"text",value:Ee.name,onChange:t=>se("name",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0}),re.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:re.name})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{P(!1),U(null),ne()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ae,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50",children:ae?"Updating...":"Update Step"})]})]})]})}),ve&&$&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:()=>H(!1)}),e.jsx("div",{className:"relative bg-white rounded-lg max-w-md w-full",children:e.jsxs("form",{onSubmit:Ke,className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Task"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit_task_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Name"}),e.jsx("input",{type:"text",id:"edit_task_name",value:B.name,onChange:t=>M("name",t.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:B.client_interact,onChange:t=>M("client_interact",t.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Client Interact"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:B.multiple_files,onChange:t=>M("multiple_files",t.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Multiple Files"})]})]}),e.jsxs("label",{className:"flex items-start space-x-2",children:[e.jsx("input",{type:"checkbox",checked:B.is_required,onChange:t=>M("is_required",t.target.checked),className:"mt-1 w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Required to unlock next step"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Must be completed before next step can be accessed"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>H(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700",children:"Update Task"})]})]})})]})}),e.jsx(pe,{show:Ne,onClose:()=>X(!1),onConfirm:Be,title:"Delete Template Working Step",message:`Are you sure you want to delete "${C?.name}" and all its tasks? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"}),e.jsx(pe,{show:we,onClose:()=>Z(!1),onConfirm:Fe,title:"Delete Template Task",message:`Are you sure you want to delete "${C?.name}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",type:"danger"})]})}export{bt as default};
