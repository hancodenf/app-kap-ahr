import{u as b,r as y,j as e,H as j,L as o}from"./app-DXo1r5rC.js";import{A as f}from"./AuthenticatedLayout-CODwulK2.js";import{S as v}from"./SearchableSelect-BI67RZUB.js";import"./ApplicationLogo-Chyc4ICs.js";function k({availableUsers:l}){const{data:r,setData:a,post:m,processing:d,errors:s,reset:N}=b({user_id:"",ap_number:"",registration_date:"",expiry_date:"",status:"active"}),[i,c]=y.useState(null),x=t=>{t.preventDefault(),m(route("admin.registered-aps.store"))},u=t=>{const n=Array.isArray(t)?t[0]?.toString():t.toString();a("user_id",n);const h=l.find(g=>g.id.toString()===n);c(h||null)},p=[{value:"active",label:"Active",color:"text-green-600"},{value:"inactive",label:"Inactive",color:"text-gray-600"},{value:"expired",label:"Expired",color:"text-red-600"}];return e.jsxs(f,{header:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold leading-tight text-gray-800",children:"Add Registered AP"}),e.jsx(o,{href:route("admin.registered-aps.index"),className:"w-full sm:w-auto bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors text-center",children:"â† Back to List"})]}),children:[e.jsx(j,{title:"Add Registered AP"}),e.jsx("div",{className:"py-4 sm:py-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"user_id",className:"block text-sm font-medium text-gray-700 mb-1",children:["User ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{value:r.user_id,onChange:u,options:l.map(t=>({value:t.id.toString(),label:t.name,subtitle:t.email})),placeholder:"Select user...",className:s.user_id?"border-red-300":""}),s.user_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.user_id}),i&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-md",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Selected:"})," ",i.name]}),e.jsx("p",{className:"text-xs text-gray-600",children:i.email}),i.position&&e.jsx("p",{className:"text-xs text-gray-600",children:i.position})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"ap_number",className:"block text-sm font-medium text-gray-700 mb-1",children:["AP Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"ap_number",value:r.ap_number,onChange:t=>a("ap_number",t.target.value),className:`w-full border ${s.ap_number?"border-red-300":"border-gray-300"} rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent`,placeholder:"Enter AP number (e.g., AP-001234)"}),s.ap_number&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.ap_number}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the unique AP registration number"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"registration_date",className:"block text-sm font-medium text-gray-700 mb-1",children:["Registration Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",id:"registration_date",value:r.registration_date,onChange:t=>a("registration_date",t.target.value),className:`w-full border ${s.registration_date?"border-red-300":"border-gray-300"} rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent`}),s.registration_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.registration_date})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"expiry_date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),e.jsx("input",{type:"date",id:"expiry_date",value:r.expiry_date,onChange:t=>a("expiry_date",t.target.value),min:r.registration_date||void 0,className:`w-full border ${s.expiry_date?"border-red-300":"border-gray-300"} rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent`}),s.expiry_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.expiry_date}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Leave empty if there's no expiry date"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{id:"status",value:r.status,onChange:t=>a("status",t.target.value),className:`w-full border ${s.status?"border-red-300":"border-gray-300"} rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent`,children:p.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),s.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.status})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:d,className:"w-full sm:w-auto bg-primary-600 hover:bg-primary-700 text-white px-6 py-2 rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Creating...":"Create Registered AP"}),e.jsx(o,{href:route("admin.registered-aps.index"),className:"w-full sm:w-auto bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-md font-medium transition-colors text-center",children:"Cancel"})]})]})})}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Important Notes:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-700",children:[e.jsx("li",{children:"Each user can only have one registered AP"}),e.jsx("li",{children:"Only users with 'company' role who don't have AP yet are shown"}),e.jsx("li",{children:"AP number must be unique across all registrations"}),e.jsx("li",{children:"Expiry date must be after registration date"})]})]})]})})]})})]})}export{k as default};
